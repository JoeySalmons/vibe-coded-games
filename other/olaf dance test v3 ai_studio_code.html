<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olaf's Happy Dance (Final)</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            background-color: #a0d8ef;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 0;
        }

        #olaf {
            width: 450px;
            max-width: 90vw;
        }

        #olaf-character, #head, #middle-body, #buttons, #right-arm, #left-arm {
            transition: transform 0.25s ease-in-out;
        }
        
        #left-arm {
            transform-origin: 160px 425px; /* Left shoulder coordinate */
        }
        #right-arm {
            transform-origin: 340px 425px; /* Right shoulder coordinate */
        }
        
        /* --- DANCE STATE: LEFT --- */
        /* Body and head transforms are unchanged */
        #olaf.dance-left #olaf-character {
            transform: matrix(0.999825, -0.018719, 0.018719, 0.999825, -6.21491, 4.62602);
        }
        #olaf.dance-left #middle-body { transform: matrix(1, 0, 0, 1, 7, 2); }
        #olaf.dance-left #buttons > #svg_1 { transform: matrix(1, 0, 0, 1, 12, 23); }
        #olaf.dance-left #head {
            transform: matrix(0.997462, -0.0711987, 0.0711987, 0.997462, -14.9203, 33.8854);
        }
        #olaf.dance-left #right-eye-pupil { transform: matrix(1.3886, 0, 0, 1.28275, -112.496, -68.0729); }
        #olaf.dance-left #left-eye-pupil { transform: matrix(1.2963, 0, 0, 1.2963, -71.2592, -74.2222); }

        /* --- ARM FIX FOR LEFT DANCE --- */
        /* Left arm UP */
        #olaf.dance-left #left-arm {
            transform: rotate(30deg) translate(15px, -5px);
        }
        /* REVISED: Right arm now rotates DOWN and forward, not behind the head */
        #olaf.dance-left #right-arm {
            transform: rotate(45deg);
        }

        /* --- DANCE STATE: RIGHT --- */
        /* Body and head transforms are unchanged */
        #olaf.dance-right #olaf-character {
            transform: matrix(0.999825, 0.018719, -0.018719, 0.999825, 6.21491, 4.62602);
        }
        #olaf.dance-right #middle-body { transform: matrix(1, 0, 0, 1, -3, 0); }
        #olaf.dance-right #buttons > #svg_1 { transform: matrix(1, 0, 0, 1, -8, 17); }
        #olaf.dance-right #head {
            transform: matrix(0.985656, 0.168766, -0.168766, 0.985656, 53.5611, -26.8176);
        }
        #olaf.dance-right #right-eye-pupil { transform: matrix(1.3886, 0, 0, 1.28275, -103.496, -68.0729); }
        #olaf.dance-right #left-eye-pupil { transform: matrix(1.2963, 0, 0, 1.2963, -63.2592, -73.2222); }
        
        /* --- ARM FIX FOR RIGHT DANCE (Mirrored from left dance) --- */
        /* REVISED: Left arm now rotates DOWN */
        #olaf.dance-right #left-arm {
            transform: rotate(-60deg);
        }
        /* REVISED: Right arm now rotates DOWN */
        #olaf.dance-right #right-arm {
            transform: rotate(-35deg);
        }
        
    </style>
</head>
<body>

    <h1>Olaf's Happy Dance</h1>
    
    <svg width="500" height="700" xmlns="http://www.w3.org/2000/svg" id="olaf" viewBox="0 0 500 700">
        <title id="olafTitle">A vector illustration of Olaf.</title>
        <defs>
         <style>.snowman-fill { fill: #F1F8FF; }
             .snowman-stroke { stroke: #DDE8F2; stroke-width: 4; }
             .twig-brown { fill: #8B4513; }
             .coal-black { fill: #2C2C2C; }
             .mouth-brown { fill: #8c3b32; }
             .carrot-orange { fill: #F39C12; }
             .carrot-stroke { stroke: #E67E22; stroke-width: 1.5; }</style>
        </defs>
        <g id="olaf-character" transform="matrix(1 0 0 1 -6 -74)">
          <g id="feet">
           <path class="snowman-fill snowman-stroke" d="m140,640c-50,10 -50,40 5,35c25,-3 25,-30 -5,-35z" id="left-foot" transform="matrix(1.38157 0 0 1.38157 -45.0519 -241.971)"/>
           <path class="snowman-fill snowman-stroke" d="m360,640c50,10 50,40 -5,35c-25,-3 -25,-30 5,-35z" id="right-foot" transform="matrix(1.33802 0 0 1.33802 -120.829 -212.321)"/>
          </g>
          <path class="snowman-fill snowman-stroke" d="m100,640c-60,-80 0,-180 150,-180c150,0 210,100 150,180c-50,50 -250,50 -300,0z" id="lower-body"/>
          <path class="snowman-fill snowman-stroke" d="m160,475c-30,-35 10,-115 90,-115c80,0 120,80 90,115c-30,40 -150,40 -180,0z" id="middle-body"/>
          <g class="coal-black" id="buttons">
           <circle cx="250" cy="425" id="svg_1" r="14" transform="matrix(1 0 0 1 0 12)"/>
           <circle cx="250" cy="535" id="svg_2" r="16" transform="matrix(1 0 0 1 -2 2)"/>
           <circle cx="250" cy="585" id="svg_3" r="16" transform="matrix(1 0 0 1 0 14)"/>
          </g>
          <g id="arms" stroke="#8B4513" stroke-linecap="round" stroke-linejoin="round" stroke-width="10">
           <path d="m340,425q60,-35 100,-65m0,0l-20,-30m20,30l20,-20" fill="none" id="right-arm"/>
           <path d="m160,425q-60,-35 -100,-65m0,0l20,-30m-20,30l-20,-20" fill="none" id="left-arm"/>
          </g>
          <g id="head">
           <path class="snowman-fill snowman-stroke" d="m175,370c-25,-90 5,-220 75,-220c70,0 100,130 75,220c-25,50 -125,50 -150,0z" id="head-shape"/>
           <g id="mouth-area" transform="translate(5.38462 23.0769) matrix(1 0 0 1.79819 0 -283.818)">
            <path class="mouth-brown" d="m190,325q60,20 120,0q-60,65 -120,0z" id="mouth" transform="matrix(1.0082 0 0 1.0082 0.442629 -4.85367)"/>
            <path d="m244,331.77l20,0l0,7.54l-20,0l0,-7.54z" fill="#FFFFFF" id="tooth"/>
           </g>
           <g id="eyes">
            <circle cx="280" cy="270" fill="#FFFFFF" id="right-eye-white" r="28" stroke="#2C2C2C" stroke-width="3"/>
            <circle class="coal-black" cx="279.45" cy="267.6" id="right-eye-pupil" r="14" transform="matrix(1.3886 0 0 1.28275 -109.496 -68.0729)"/>
            <circle cx="220" cy="270" fill="#FFFFFF" id="left-eye-white" r="28" stroke="#2C2C2C" stroke-width="3"/>
            <circle class="coal-black" cx="222.37" cy="269.41" id="left-eye-pupil" r="14" transform="matrix(1.2963 0 0 1.2963 -66.2592 -74.2222)"/>
           </g>
           <g id="eyebrows" stroke="#65320d" stroke-linecap="round" stroke-width="8">
            <path d="m269.35,230.57q22.11,-9.07 45.27,16.17" fill="none" id="right-eyebrow" transform="rotate(-3.29299 291.987 237.457)"/>
            <path d="m235,240q-20,-10 -45,5" fill="none" id="left-eyebrow" transform="matrix(1.10015 -0.215669 0.215669 1.10015 -79.2185 20.6375)"/>
           </g>
           <g id="nose-group" transform="matrix(0.834509, 0.139979, 0.144805, 1.47056, -8.44446, -182.101)">
            <path class="carrot-orange carrot-stroke" d="m250,290l80,5l-75,10l-5,-15z" id="carrot-nose" transform="matrix(1.3322 0 0 1.3322 -77.4687 -83.3976)"/>
           </g>
           <g id="hair" stroke="#8B4513" stroke-linecap="round" stroke-width="8">
            <path d="m250,155l0,-30" id="hair-1"/>
            <path d="m250,152l-15,-24" id="hair-2"/>
            <path d="m250,152l15,-24" id="hair-3"/>
           </g>
          </g>
        </g>
    </svg>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const olaf = document.getElementById('olaf');
            const danceSequence = ['dance-left', null, 'dance-right', null];
            let currentStep = 0;

            function doDanceStep() {
                const currentMove = danceSequence[currentStep];
                olaf.classList.remove('dance-left', 'dance-right');

                if (currentMove) {
                    olaf.classList.add(currentMove);
                }
                
                currentStep = (currentStep + 1) % danceSequence.length;
            }

            setInterval(doDanceStep, 1000);
        });
    </script>
</body>
</html>